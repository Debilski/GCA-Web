@(account: Option[Account], conference: Conference)

@template(account, Option(conference), "conference") {

    <div class="hidden-data">
        <div id="conference-uuid">@conference.uuid</div>
    </div>

    <div class="hidden-data">
        <div id="account-uuid">@if(account.isDefined) {
            @account.get.uuid
        }
        </div>
    </div>

    <script data-main="@routes.Assets.at("javascripts/ownerslist.js")"
        src="@routes.Assets.at("javascripts/require.js")"></script>

    <!-- Loading box -->
    <div data-bind="if: isLoading">
        <div class="alert alert-info fade in out">
            <h4>Loading data</h4>
            <p>Please wait...</p>
        </div>
    </div>

    <!-- Knockout non-flicker  -->
    <div style="display: none" data-bind="visible: true">

    <!-- Error message box -->
    <div data-bind="visible: error">
            <!-- ko with: error -->
        <div class="alert alert-warning fade in alert-dismissable" data-bind="css: level">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <strong data-bind="html: message"></strong>
        </div>
            <!-- /ko -->
    </div>

    <!-- The conference info page -->

    <div class="header">
        <h1>@conference.name Abstract Submission</h1>
    </div>

    <hr class="separator">

    <!-- Buttons to register, sign in and submit -->

    @if(conference.isOpen) {
    <div>
        <p>Abstract submission is currently open. In order to submit an abstract please press the appropriate button below.</p>
        @if(!account.isDefined) {

            <form action="@securesocial.core.providers.utils.RoutesHelper.login()">
                <p><input type="submit" value="Sign In"> if you already have an account.</p>
            </form>

            <form action="@securesocial.core.providers.utils.RoutesHelper.startSignUp()">
                <p>If not, please <input type="submit" value="Register"> and proceed with submission.</p>
            </form>

        } else {
            <form action="@routes.Application.submission(conference.uuid)">
                <input type="submit" value="Submit an Abstract">
            </form>
        }
    </div>
    } else {
    <div>
        <p>Abstract submission is currently closed.</p>
    </div>
    }

    <hr class="separator">

    <!-- Conference owner section to manage owners -->

    @if(account.isDefined) {
        @if(conference.isOwner(account.get)) {
            <p>You are the owner of this conference. Some more owners can be added here.</p>

            <p>Here is the list of current owners:</p>
            <ul data-bind="foreach: owners, visible: owners().length > 0">
                <li>
                    <span data-bind="text: mail"></span>
                    <a href="#" data-bind="click: $parent.removeOwner">Remove</a>
                </li>
            </ul>

            <form data-bind="submit: addOwner">
                Add owner by e-mail: <input data-bind="value: newEmail" placeholder="enter a valid e-mail here" />
                <button type="submit">Add to the list</button>
                and after
                <button data-bind="click: save">Save all</button>
            </form>
        }
    }

    </div> <!-- KO !flickerbox -->
}